class Picklist extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this._items=[],this._keywords=new Map,this._isOpen=!1,this.setupStyles(),this.render(),this.setupEventListeners()}static get observedAttributes(){return["placeholder"]}setupStyles(){let t=document.createElement("style");t.textContent=`
    :host {
        display: block;
        width: 100%;
        max-width: 300px;
        position: relative;
        font-family: system-ui, -apple-system, Arial, sans-serif;
    }

    .dropdown-container {
        position: relative;
    }

    .dropdown-input {
        width: 100%;
        padding: 8px 32px 8px 12px;
        border: 1px solid #ddd;
        border-radius: 4px;
        box-sizing: border-box;
        font-size: 16px;
        transition: border-color 0.2s, box-shadow 0.2s;
        cursor: pointer;
        background: white;
    }

    .dropdown-input:focus {
        outline: none;
        border-color: #4a90e2;
        box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
    }

    .dropdown-arrow {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%) rotate(0deg);
        width: 0;
        height: 0;
        border-left: 5px solid transparent;
        border-right: 5px solid transparent;
        border-top: 5px solid #666;
        pointer-events: none;
        transition: transform 0.2s ease-in-out;
    }

    .dropdown-list.open + .dropdown-arrow,
    .dropdown-input:focus + .dropdown-arrow {
        transform: translateY(-50%) rotate(180deg);
    }

    .dropdown-list {
        position: absolute;
        top: calc(100% + 4px);
        left: 0;
        right: 0;
        background: white;
        border: 1px solid #ddd;
        border-radius: 4px;
        max-height: 200px;
        overflow-y: auto;
        display: none;
        z-index: 1000;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    .dropdown-list.open {
        display: block;
    }

    .dropdown-item {
        padding: 8px 12px;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .dropdown-item:not(:last-child) {
        border-bottom: 1px solid #f0f0f0;
    }

    .dropdown-item:hover {
        background-color: #f8f9fa;
    }

    .dropdown-item .secondary-text {
        color: #666;
        font-size: 0.9em;
    }

    .no-results {
        padding: 8px 12px;
        color: #666;
        font-style: italic;
    }
`,this.shadowRoot.appendChild(t)}render(){this.shadowRoot.innerHTML+=`
    <div class="dropdown-container">
        <input type="text" class="dropdown-input" placeholder="${this.getAttribute("placeholder")||"Select an item..."}">
        <div class="dropdown-list"></div>
        <div class="dropdown-arrow"></div>
    </div>
`}setupEventListeners(){let t=this.shadowRoot.querySelector(".dropdown-input"),e=this.shadowRoot.querySelector(".dropdown-list");t.addEventListener("input",()=>{this._selectedValue=null,this.handleInput()}),t.addEventListener("focus",()=>{t.value&&t.select(),this.handleInput()}),document.addEventListener("click",t=>{this.contains(t.target)||this.closeDropdown()}),e.addEventListener("click",t=>{let e=t.target.closest(".dropdown-item");if(e){let o=e.textContent.trim();this.selectItem(o)}})}setItems(t){this._items=t,this._keywords.clear(),t.forEach(t=>{"object"==typeof t?this._keywords.set(t.value,t.keywords||[]):this._keywords.set(t,[t.toLowerCase()])})}handleInput(){let t=this.shadowRoot.querySelector(".dropdown-input"),e=t.value.toLowerCase(),o=this._items.filter(t=>{let o="object"==typeof t?t.value:t,s=this._keywords.get(o);return s.some(t=>t.toLowerCase().includes(e))||o.toLowerCase().includes(e)});this.updateDropdownList(o),o.length>0?this.openDropdown():this.closeDropdown(),this.dispatchEvent(new CustomEvent("dropdown-input",{detail:{value:e}}))}updateDropdownList(t){let e=this.shadowRoot.querySelector(".dropdown-list");if(0===t.length){e.innerHTML='<div class="no-results">No matching items</div>';return}e.innerHTML=t.map(t=>{let e="object"==typeof t?t.value:t;return`<div class="dropdown-item">
        <span>${e}</span>
    </div>`}).join("")}openDropdown(){let t=this.shadowRoot.querySelector(".dropdown-list");t.classList.add("open"),this._isOpen=!0}closeDropdown(){let t=this.shadowRoot.querySelector(".dropdown-list");t.classList.remove("open"),this._isOpen=!1}selectItem(t){let e=this.shadowRoot.querySelector(".dropdown-input");e.value=t,this._selectedValue=t,this.closeDropdown(),this.dispatchEvent(new CustomEvent("dropdown-select",{detail:{value:t,keywords:this._keywords.get(t)}}))}connectedCallback(){this.hasAttribute("placeholder")||this.setAttribute("placeholder","Select an item...")}attributeChangedCallback(t,e,o){if("placeholder"===t){let s=this.shadowRoot.querySelector(".dropdown-input");s&&(s.placeholder=o)}}}customElements.define("pick-list",Picklist);